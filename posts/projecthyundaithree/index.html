<!DOCTYPE html><html lang="ko-KR" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)" /><meta name="author" content="Simon Anderson" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="해당 프로젝트는 현대자동차의 브랜드 밸류를 텍스트 마이닝을 통해 알아봅니다. 현대자동차 브랜드 밸류 조사할 때는 자체제작한 AI 스피커를 이용하여 자연어로 인터페이스(NUI)합니다. 끝으로 해당 프로젝트는 현대자동차의 지원을 받지 않았으며, 그저 현대자동차 소액 주주로서 만든 프로젝트입니다." /><meta property="og:description" content="해당 프로젝트는 현대자동차의 브랜드 밸류를 텍스트 마이닝을 통해 알아봅니다. 현대자동차 브랜드 밸류 조사할 때는 자체제작한 AI 스피커를 이용하여 자연어로 인터페이스(NUI)합니다. 끝으로 해당 프로젝트는 현대자동차의 지원을 받지 않았으며, 그저 현대자동차 소액 주주로서 만든 프로젝트입니다." /><link rel="canonical" href="https://simonwithwoogi.github.io/posts/projecthyundaithree/" /><meta property="og:url" content="https://simonwithwoogi.github.io/posts/projecthyundaithree/" /><meta property="og:site_name" content="몬기의 기술공방" /><meta property="og:image" content="https://simonwithwoogi.github.io/assets/img/CI/Hyundai.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-28T19:31:00+09:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://simonwithwoogi.github.io/assets/img/CI/Hyundai.png" /><meta property="twitter:title" content="Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)" /><meta name="twitter:site" content="@no-name" /><meta name="twitter:creator" content="@Simon Anderson" /><meta name="google-site-verification" content="Simon Anderson verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Simon Anderson"},"description":"해당 프로젝트는 현대자동차의 브랜드 밸류를 텍스트 마이닝을 통해 알아봅니다. 현대자동차 브랜드 밸류 조사할 때는 자체제작한 AI 스피커를 이용하여 자연어로 인터페이스(NUI)합니다. 끝으로 해당 프로젝트는 현대자동차의 지원을 받지 않았으며, 그저 현대자동차 소액 주주로서 만든 프로젝트입니다.","url":"https://simonwithwoogi.github.io/posts/projecthyundaithree/","@type":"BlogPosting","image":"https://simonwithwoogi.github.io/assets/img/CI/Hyundai.png","headline":"Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)","dateModified":"2021-04-30T01:33:05+09:00","datePublished":"2021-04-28T19:31:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://simonwithwoogi.github.io/posts/projecthyundaithree/"},"@context":"https://schema.org"}</script><title>Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3) | 몬기의 기술공방</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/Blog_logo_210213.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">몬기의 기술공방</a></div><div class="site-subtitle font-italic">Simon with Woogi</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/SimonWithWoogi" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/no-name" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['simon.anderson.tech','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Simon Anderson </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Apr 28, 2021, 7:31 PM +0900" prep="on" > Apr 28 <i class="unloaded">2021-04-28T19:31:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Apr 30, 2021, 1:33 AM +0900" prefix="Updated " > Apr 30 <i class="unloaded">2021-04-30T01:33:05+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3738 words">20 min</span></div></div><div class="post-content"><p><strong>해당 프로젝트는 현대자동차의 브랜드 밸류를 텍스트 마이닝을 통해 알아봅니다. 현대자동차 브랜드 밸류 조사할 때는 자체제작한 AI 스피커를 이용하여 자연어로 인터페이스(NUI)합니다. 끝으로 해당 프로젝트는 현대자동차의 지원을 받지 않았으며, 그저 현대자동차 소액 주주로서 만든 프로젝트입니다.</strong></p><h2 id="1-crawler"><span style="color:darkblue">1. Crawler</span></h2><p>​</p><p>이번 포스팅에서는 <code class="language-plaintext highlighter-rouge">Twitter</code>, <code class="language-plaintext highlighter-rouge">Naver</code>, <code class="language-plaintext highlighter-rouge">YouTube</code> <code class="language-plaintext highlighter-rouge">Crawler 크롤러</code>를 얘기합니다. 본격적으로 만들기 전에 <code class="language-plaintext highlighter-rouge">Crawler</code> 에 대한 기본적인 사항은 알려드릴려고 합니다. 프로젝트 포스팅이 아니었다면, 좀 더 자세하게 <code class="language-plaintext highlighter-rouge">DFS</code> 를 기반으로 <code class="language-plaintext highlighter-rouge">하이퍼링크 탐색</code> 을 얘기할텐데, 여기서는 넘어가겠습니다.</p><p>제가 가장 처음으로 <code class="language-plaintext highlighter-rouge">크롤러</code> 라는 이름을 들었던 것은 구글이 검색엔진을 발표했던 논문인데요. <code class="language-plaintext highlighter-rouge">The Anatomy of a Large-Scale Hypertextual Web Search Engine</code> 이 1998년 논문이니까 최근에 나온 단어라고는 할 수 없습니다. 이때의 크롤링은 아래의 주제를 얘기하고 있습니다.</p><hr /><ul><li><code class="language-plaintext highlighter-rouge">Crawling</code> 은 속도보다 인덱싱 생성 속도가 더 중요하다.<li>방문한 웹페이지는 무조건 임시저장한다.<li>웹 접속 지연(일시, 영구)에 대한 대응이 필요하다.<li>엑세스가 집중되어 거부되는 경우 대비책이 필요하다,<li>웹 페이지 내용이 무의미하게 많은 내용을 차지하는 경우 대비책이 필요하다.<li>페이지 내 하이퍼링크가 순환되는 경우 대비책이 필요하다.</ul><hr /><p>이를 보고 <code class="language-plaintext highlighter-rouge">세르게이 브린과 래리 페이지</code> 는 <code class="language-plaintext highlighter-rouge">Web Crawler</code> 에 대해 어떻게 생각했는 지 유추해볼 수 있습니다. 먼저, 크롤러가 방문한 웹페이지에 대해서 <strong>테이블 형태의 데이터</strong>가 있다는 점입니다. 이때 당시엔 <code class="language-plaintext highlighter-rouge">Database</code> 를 사용했을 수도 있고 <code class="language-plaintext highlighter-rouge">Pandas</code> 에 있는 <code class="language-plaintext highlighter-rouge">Data frame</code> 을 사용했을 수도 있겠죠. 그래도 <code class="language-plaintext highlighter-rouge">No-SQL</code> 에 대한 논문이다보니 <code class="language-plaintext highlighter-rouge">링크드 리스트</code> 같은 포인터계열 자료구조일 확률이 높습니다. 뭐, 우리가 현재 집중해야될 내용은 어떤 속성을 가진 데이터를 보관하고 있었다는 점이죠. 예를 들면 아래 표 처럼요.</p><div class="table-wrapper"><table><thead><tr><th>ID<th>주소<th>크기<tbody><tr><td>101<td>www-someone-com<td>100<tr><td>102<td>www-like-co-kr<td>200<tr><td>103<td>www-me-go-kr<td>300</table></div><p>그리고 두번째는 탐색 알고리즘을 가지고 무작위 웹사이트를 방문한다는 점입니다. 대표적인 탐색 알고리즘을 예로 들면 <code class="language-plaintext highlighter-rouge">DFS(Depth-First-Search) 그리고 BFS(Breadth-Frist-Search)</code>가 있죠. 보통 게임관련 인공지능을 배울 때는 <code class="language-plaintext highlighter-rouge">DFS</code> 가 순환에 취약하여 최적해를 못 찾는다고 알려주시는 교수님들이 계십니다. 그래서 대부분 <code class="language-plaintext highlighter-rouge">DFS</code> 가 최적해를 보장하지 못하고 완전하지 못하다고 외우는 사람들이 많은데, 이는 경우의 수를 얘기하는 공간에서 순환이 일어났을 경우를 얘기합니다.</p><p>구글의 <code class="language-plaintext highlighter-rouge">크롤러</code> 는 <strong>유한한 공간에서의 <code class="language-plaintext highlighter-rouge">DFS 계열</code> 탐색 알고리즘</strong>을 사용했습니다. 왜냐하면, 방문한 웹페이지을 임시저장하고 하이퍼링크로의 순환을 대비했다는 것은 <code class="language-plaintext highlighter-rouge">DFS</code> 에서 지나온 경로에 대한 중복검사를 했다고 볼 수 있죠.</p><p>끝으로 접속 지연, 액세스 거부, 무의미한 많은 내용들에 대한 대비책은 크롤링 작업성능에 영향이 되는 <strong>불필요한 지연을 판단하여 결정하는 알고리즘</strong>이 탑재되어 있음을 알 수 있습니다.</p><h3 id="11-kinds-of-crawler"><span style="color:darkblue">1.1 Kinds of Crawler</span></h3><p>요즘은 <code class="language-plaintext highlighter-rouge">Bot, Spider</code> 라고도 합니다. 개발자가 만든 규칙에 의하여 수집만 기계적으로 한 다음 돌려주기 때문이죠. <code class="language-plaintext highlighter-rouge">구글</code> 은 <code class="language-plaintext highlighter-rouge">크롤러</code> 안에 <code class="language-plaintext highlighter-rouge">인덱싱</code> 을 언급했으나, 이제는 <code class="language-plaintext highlighter-rouge">Crawler</code> 와 <code class="language-plaintext highlighter-rouge">Indexer</code> 를 구분하고 있습니다. 정보를 수집하는 것과 가공하는 것은 모듈별로 나누는 것에 대해 많은 사람들이 공감을 했다고 볼 수 있죠. 그리고 개발자가 만든 규칙들이 특정 웹사이트에 특정 사이트로 한정한다면 이에 대한 <strong>행위는</strong> <code class="language-plaintext highlighter-rouge">Crawling</code> 이라기 보다는 <code class="language-plaintext highlighter-rouge">Scraping</code> 이라고 하는 것이 옳다면서 학술적 단어의 명확한 기준을 제시하고 있습니다.</p><p><code class="language-plaintext highlighter-rouge">Scraping</code> 이라는 행위가 언급되다보니 수집하는 웹사이트에 대한 분류도 시작했습니다. 주소에 접근하여 정해진 태그로 원하는 데이터를 뽑아오는 <code class="language-plaintext highlighter-rouge">정적 크롤링</code> 과 브라우저를 거쳐서 특정 순서를 거쳐 원하는 데이터를 뽑아오는 <code class="language-plaintext highlighter-rouge">동적 크롤링</code> 으로 나뉩니다.</p><p>다음부터는 바로 실습입니다.</p><h3 id="12-twitter-crawler"><span style="color:darkblue">1.2 Twitter Crawler</span></h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/Project/Tw_1.png" alt="TextvsOpinion" /></p><p>새로운 Python 파일을 만들어주세요.</p><p><code class="language-plaintext highlighter-rouge">Twitter</code> 크롤러는 <a href="https://simonwithwoogi.github.io/posts/projecthyundaitwo/">전 포스팅</a>에서 설명했기 때문에 위와 같은 프로젝트가 만들어져 있을 겁니다. <code class="language-plaintext highlighter-rouge">Twitter API</code> 는 매월 500,000 개의 트윗을 저장할 수 있습니다. 여기에 있는 <code class="language-plaintext highlighter-rouge">Consumer Keys</code> 와 <code class="language-plaintext highlighter-rouge">Bearer Token</code>, <code class="language-plaintext highlighter-rouge">Access Token and Secret</code> 의 값들은 저장했다는 가정하고 소스를 설명하겠습니다. 참고로 언어는 <code class="language-plaintext highlighter-rouge">Python</code> 이며, <code class="language-plaintext highlighter-rouge">PyCharm</code> 에서 구동했습니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">twitter</span>

<span class="n">consumer_key</span> <span class="o">=</span> <span class="s">'키입력'</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s">'키입력'</span>

<span class="n">access_token</span> <span class="o">=</span> <span class="s">'키입력'</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s">'키입력'</span>

<span class="n">bearer_token</span> <span class="o">=</span> <span class="s">'키입력'</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">twitter</code> 모듈을 불러온 다음, <code class="language-plaintext highlighter-rouge">Twitter API</code> 에서 얻은 키들을 쭉 넣어주세요.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_object</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">api</span> <span class="o">=</span> <span class="n">twitter</span><span class="p">.</span><span class="n">Api</span><span class="p">(</span><span class="n">consumer_key</span><span class="o">=</span><span class="n">consumer_key</span><span class="p">,</span>
                                  <span class="n">consumer_secret</span><span class="o">=</span><span class="n">consumer_secret</span><span class="p">,</span>
                                  <span class="n">access_token_key</span><span class="o">=</span><span class="n">access_token</span><span class="p">,</span>
                                  <span class="n">access_token_secret</span><span class="o">=</span><span class="n">access_token_secret</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">api</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Twitter</code> 객체를 얻어오는 함수입니다. <code class="language-plaintext highlighter-rouge">twitter</code> 모듈에서 얻어오는 <code class="language-plaintext highlighter-rouge">api</code> 를 반환합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_TwitterSearch</span><span class="p">(</span><span class="n">srcText</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="n">api</span><span class="p">):</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">api</span><span class="p">.</span><span class="n">GetSearch</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="n">srcText</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">display</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">search</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">search</span>
</pre></table></code></div></div><p>받아온 <code class="language-plaintext highlighter-rouge">api</code> 객체를 이용하여, 원하는 <code class="language-plaintext highlighter-rouge">검색어(srcText)</code> 를 검색합니다.<code class="language-plaintext highlighter-rouge">display</code> 는 리턴에 필요한 결과들을 얘기하는데 기본은 15로 되어있고 최대 100까지 지원합니다. (현재 소스에서는 100을 리터럴로 설정했습니다.)</p><p>또한 검색 결과를 반환합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">UnfoldData</span><span class="p">(</span><span class="n">search</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>  
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>  
    <span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">search</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s">'text'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tweet</span><span class="p">.</span><span class="n">text</span>  
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">" : "</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">search</span>
</pre></table></code></div></div><p>반환한 검새결과를 받아와서 처리하기 쉽게 바꿔줍니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">SaveData</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">Header</span><span class="p">):</span>
    <span class="c1"># 전체 문서를 파일 저장
</span>    <span class="n">wfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">Header</span> <span class="o">+</span> <span class="s">"twitter.txt"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">'w'</span><span class="p">)</span>  <span class="c1"># 쓰기 모드
</span>    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">search</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s">'text'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tweet</span><span class="p">.</span><span class="n">text</span>
        <span class="n">wfile</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">'text'</span><span class="p">]</span> <span class="o">+</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">wfile</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</pre></table></code></div></div><p>끝으로 텍스트 문서에 검색한 단어 + twitter라는 이름을 달아서 텍스트 파일로 저장합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">tweety</span> <span class="o">=</span> <span class="n">get_object</span><span class="p">()</span>

    <span class="n">srcText</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'Enter your target word: '</span><span class="p">)</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">get_TwitterSearch</span><span class="p">(</span><span class="n">srcText</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">tweety</span><span class="p">)</span>
    <span class="n">SaveData</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">srcText</span><span class="p">)</span>
</pre></table></code></div></div><p>메인 함수입니다. 제가 원하는 키워드를 입력하면 검색을 진행하여 저장합니다.</p><p>저는 여기에는 없지만, G90, G80, G70, GV80 Palisade Sonata Elantra IONIQ Santafe를 순차적으로 돌아가며 검색을 진행했습니다.</p><h3 id="13-naver-crawler"><span style="color:darkblue">1.3 Naver Crawler</span></h3><p>새로운 Python 파일을 만들어주세요.</p><p>다음은 네이버입니다. <a href="https://simonwithwoogi.github.io/posts/projecthyundaitwo/">전 포스팅</a>의 <code class="language-plaintext highlighter-rouge">Naver API</code> 에 대한 가입을 확인해주세요. 네이버는 <code class="language-plaintext highlighter-rouge">일일허용량</code> 이 <code class="language-plaintext highlighter-rouge">25,000</code> 건입니다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/Project/Nv_1.png" alt="TextvsOpinion" /></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">client_id</span> <span class="o">=</span> <span class="s">"키입력"</span>
<span class="n">client_secret</span> <span class="o">=</span> <span class="s">"키입력"</span>
</pre></table></code></div></div><p>초기화를 해줍시다. 그리고 <code class="language-plaintext highlighter-rouge">Naver 개발자센터</code> 에서 키 값을 입력하시면 됩니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_RequestURL</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">request</span><span class="p">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">"X-Naver-Client-Id"</span><span class="p">,</span> <span class="n">client_id</span><span class="p">)</span>
    <span class="n">request</span><span class="p">.</span><span class="n">add_header</span><span class="p">(</span><span class="s">"X-Naver-Client-Secret"</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">rescode</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">getcode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">rescode</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">response_body</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">response_body</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"Error Code:"</span> <span class="o">+</span> <span class="n">rescode</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">urllib</code> 를 통해서 <code class="language-plaintext highlighter-rouge">url</code> 에 대해 <code class="language-plaintext highlighter-rouge">반정형 데이터</code> 를 가져옵니다. 그리고 키값을 헤더로 붙인 다음, 담고있는 정보에 대해서 반환해줍니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_NaverSearch</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">srcText</span><span class="p">,</span> <span class="n">page_start</span><span class="p">,</span> <span class="n">display</span><span class="p">):</span>
    <span class="n">baseurl</span> <span class="o">=</span> <span class="s">"https://openapi.naver.com/v1/search/"</span>
    <span class="n">node</span> <span class="o">=</span> <span class="s">"%s.json"</span> <span class="o">%</span> <span class="n">node</span>
    <span class="n">qry</span> <span class="o">=</span> <span class="s">"?query=%s&amp;start=%s&amp;display=%s"</span> <span class="o">%</span> <span class="p">(</span><span class="n">urllib</span><span class="p">.</span><span class="n">parse</span><span class="p">.</span><span class="n">quote</span><span class="p">(</span><span class="n">srcText</span><span class="p">),</span> <span class="n">page_start</span><span class="p">,</span> <span class="n">display</span><span class="p">)</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">baseurl</span> <span class="o">+</span> <span class="n">node</span> <span class="o">+</span> <span class="n">qry</span>
    <span class="n">responseDecode</span> <span class="o">=</span> <span class="n">get_RequestURL</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">responseDecode</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">responseDecode</span><span class="p">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">json</code> 형태로 반환하는 코드입니다. <code class="language-plaintext highlighter-rouge">node</code> 는 분류할 장르를 뜻하구요. <code class="language-plaintext highlighter-rouge">stcText</code> 는 검색 키워드입니다. <code class="language-plaintext highlighter-rouge">page_start</code> 는 네이버에서 지원하는 몇 번째 페이지부터 검색할지 볼 수 있습니다. <code class="language-plaintext highlighter-rouge">display</code> 는 가져올 수 있는 수 입니다. 위 <code class="language-plaintext highlighter-rouge">트위터</code> 처럼 100을 리터럴로 입력했습니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_PostData</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="n">jsonObj</span><span class="p">,</span> <span class="n">docNumber</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span>
    <span class="n">org_link</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s">'originallink'</span><span class="p">]</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s">'link'</span><span class="p">]</span>

    <span class="n">pDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">post</span><span class="p">[</span><span class="s">'pubDate'</span><span class="p">],</span> <span class="s">'%a, %d %b %Y %H:%M:%S +0900'</span><span class="p">)</span>
    <span class="n">pDate</span> <span class="o">=</span> <span class="n">pDate</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y-%m-%d %H:%M:%S'</span><span class="p">)</span>

    <span class="n">jsonObj</span><span class="p">.</span><span class="n">append</span><span class="p">({</span><span class="s">'cnt'</span><span class="p">:</span><span class="n">docNumber</span><span class="p">,</span> <span class="s">'title'</span><span class="p">:</span><span class="n">title</span><span class="p">,</span> <span class="s">'description'</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                    <span class="s">'org_link'</span><span class="p">:</span><span class="n">org_link</span><span class="p">,</span> <span class="s">'link'</span><span class="p">:</span><span class="n">org_link</span><span class="p">,</span> <span class="s">'pDate'</span><span class="p">:</span><span class="n">pDate</span><span class="p">})</span>
    <span class="k">return</span>
</pre></table></code></div></div><p>수집한 데이터에 대해 꼬리를 붙이는 작업입니다. 언제 가져왔는지부터 추가적인 정보를 입력합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># news blog cafearticle movie shop
</span>    <span class="n">node</span> <span class="o">=</span> <span class="s">'news'</span>
    <span class="n">srcText</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'Enter your target word: '</span><span class="p">)</span>
    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">jsonObj</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">jsonResponse</span> <span class="o">=</span> <span class="n">get_NaverSearch</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">srcText</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">jsonResponse</span><span class="p">[</span><span class="s">'total'</span><span class="p">]</span>

    <span class="k">while</span><span class="p">((</span><span class="n">jsonResponse</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">jsonResponse</span><span class="p">[</span><span class="s">'display'</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">)):</span>
        <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">jsonResponse</span><span class="p">[</span><span class="s">'items'</span><span class="p">]:</span>
            <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">get_PostData</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="n">jsonObj</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)</span>

        <span class="n">start</span> <span class="o">=</span> <span class="n">jsonResponse</span><span class="p">[</span><span class="s">'start'</span><span class="p">]</span> <span class="o">+</span> <span class="n">jsonResponse</span><span class="p">[</span><span class="s">'display'</span><span class="p">]</span>
        <span class="n">jsonResponse</span> <span class="o">=</span> <span class="n">get_NaverSearch</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">srcText</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="mi">2700</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">'Entire searched : %d docs'</span> <span class="o">%</span><span class="n">total</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'%s_naver_%s.json'</span> <span class="o">%</span><span class="p">(</span><span class="n">srcText</span><span class="p">,</span> <span class="n">node</span><span class="p">),</span> <span class="s">'w'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf8'</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
        <span class="n">jsonFile</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">jsonObj</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">ensure_ascii</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span>

        <span class="n">outfile</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">jsonFile</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"Imported data : %d docs"</span> <span class="o">%</span><span class="p">(</span><span class="n">cnt</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'%s_naver_%s.json SAVED'</span> <span class="o">%</span><span class="p">(</span><span class="n">srcText</span><span class="p">,</span><span class="n">node</span><span class="p">))</span>
</pre></table></code></div></div><p>끝으로 <code class="language-plaintext highlighter-rouge">main</code> 입니다. <code class="language-plaintext highlighter-rouge">node</code> 의 장르는 위 주석 리스트에서 고를 수 있구요. 원하는 키워드를 입력합니다. 저는 Hyundai, G90, G80, G70, GV80 Palisade Sonata Elantra IONIQ Santafe를 순서대로 입력했습니다. 순서대로 <code class="language-plaintext highlighter-rouge">json</code> 객체를 받아와 꼬리표를 붙인 뒤 그대로 로컬에 저장합니다.</p><h3 id="14-youtube-crawler"><span style="color:darkblue">1.4 Youtube Crawler</span></h3><p>새로운 Python 파일을 만들어주세요.</p><p>끝으로 동적 크롤링인 <code class="language-plaintext highlighter-rouge">YouTube</code> 입니다. <code class="language-plaintext highlighter-rouge">Selenium</code> 으로 <code class="language-plaintext highlighter-rouge">크롬</code> 브라우저를 제어하여 해당 유투버의 전체 영상을 저장하고, 각 영상마다 댓글들을 수집합니다. <code class="language-plaintext highlighter-rouge">YouTube API</code> 는 <code class="language-plaintext highlighter-rouge">구글 클라우드</code> 에서 제공하지만, 생각보다 조건이 적고, 비싸서 다른 방식을 썼습니다. 결론적으로 여기서는 <code class="language-plaintext highlighter-rouge">Open API</code> 를 쓰지 않습니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1"># 영상취득용
</span><span class="kn">from</span> <span class="nn">selenium.webdriver</span> <span class="kn">import</span> <span class="n">Chrome</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.keys</span> <span class="kn">import</span> <span class="n">Keys</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">time</span>
</pre></table></code></div></div><p>마찬가지로 초기화를 해주세요.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">set_Browser</span><span class="p">(</span><span class="n">driverpath</span><span class="p">):</span>
    <span class="n">delay</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="c1"># chromedriver를 다운받고 window 사용자는 exe를 붙여야함
</span>    <span class="n">browser</span> <span class="o">=</span> <span class="n">Chrome</span><span class="p">(</span><span class="n">driverpath</span> <span class="o">+</span> <span class="s">"/chromedriver"</span><span class="p">)</span>
    <span class="n">browser</span><span class="p">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">browser</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">크롬</code> 브라우저를 세팅하는 함수입니다. <code class="language-plaintext highlighter-rouge">chrome</code> 실행파일경로를 지정해주면 브라우저를 실행합니다. 테스트해보지는 않았으나, <code class="language-plaintext highlighter-rouge">Windows</code> 사용자는 <code class="language-plaintext highlighter-rouge">chromedriver.exe</code> 로 되어있을 겁니다. <code class="language-plaintext highlighter-rouge">브라우저</code> 객체를 반환합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">handling_Browser</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">start_url</span><span class="p">):</span>
    <span class="n">obj</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">start_url</span><span class="p">)</span>
    <span class="n">obj</span><span class="p">.</span><span class="n">maximize_window</span><span class="p">()</span>

    <span class="n">obj</span><span class="p">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//*[@class="scrollable style-scope tp-yt-paper-tabs"]/tp-yt-paper-tab[2]'</span><span class="p">).</span><span class="n">click</span><span class="p">()</span>

    <span class="n">body</span> <span class="o">=</span> <span class="n">obj</span><span class="p">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s">'body'</span><span class="p">)</span>  <span class="c1"># 스크롤하기 위해 소스 추출
</span>
    <span class="n">num_of_pagedowns</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="c1"># num_of_pagedowns번 밑으로 내리는 것
</span>    <span class="k">while</span> <span class="n">num_of_pagedowns</span><span class="p">:</span>
        <span class="n">body</span><span class="p">.</span><span class="n">send_keys</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">PAGE_DOWN</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">num_of_pagedowns</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="n">html0</span> <span class="o">=</span> <span class="n">obj</span><span class="p">.</span><span class="n">page_source</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html0</span><span class="p">,</span> <span class="s">'html.parser'</span><span class="p">)</span>
    <span class="n">rtnhtml</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="n">select</span><span class="p">(</span>
        <span class="s">'h3 &gt; a'</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">rtnhtml</span>
</pre></table></code></div></div><p>브라우저를 제어하는 함수입니다. <code class="language-plaintext highlighter-rouge">obj</code> 는 브라우저 객체를 받구요. <code class="language-plaintext highlighter-rouge">Youtube</code> 에 원하는 <strong>유투버 메인 홈페이지</strong>를 <code class="language-plaintext highlighter-rouge">start_url</code> 로 입력합니다. 저는 <code class="language-plaintext highlighter-rouge">현대자동차</code> 를 타겟으로 했으니 <code class="language-plaintext highlighter-rouge">https://www.youtube.com/user/HyundaiWorldwide</code> 로 했습니다.그리고 브라우저 스크롤을 내리면 동영상이 불러와지는 유투브 특징때문에 브라우저 스크롤을 3초마다 20번씩 내리도록 설정했습니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_YoutuberClips</span><span class="p">(</span><span class="n">srcText</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span>

    <span class="n">browser</span> <span class="o">=</span> <span class="n">set_Browser</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">start_url</span> <span class="o">=</span> <span class="s">"https://www.youtube.com/user/"</span> <span class="o">+</span> <span class="n">srcText</span> <span class="o">+</span> <span class="s">"/featured"</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">handling_Browser</span><span class="p">(</span><span class="n">browser</span><span class="p">,</span> <span class="n">start_url</span><span class="p">)</span>

    <span class="n">title</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">html</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">idx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'href'</span><span class="p">)[:</span><span class="mi">7</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'/watch?'</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">url</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">idx</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>

    <span class="n">title_list</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'url'</span><span class="p">])</span>
    <span class="n">title_list</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>
    <span class="n">title_list</span><span class="p">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">srcText</span> <span class="o">+</span> <span class="s">"_YouTubeClips.csv"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">title_list</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Yutube</code> 동영상들을 받아옵니다. 동영상리스트를 쭉 <code class="language-plaintext highlighter-rouge">title</code> 이랑 <code class="language-plaintext highlighter-rouge">url</code> 을 담아넣고 반환합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_Replies</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">srcText</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">srcText</span> <span class="o">+</span> <span class="s">'_YouTubeClips.csv'</span><span class="p">)</span>

    <span class="n">info</span><span class="p">[</span><span class="s">'url'</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">'url'</span><span class="p">].</span><span class="nb">str</span><span class="p">[</span><span class="mi">9</span><span class="p">:]</span>

    <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">video_id</span> <span class="ow">in</span> <span class="n">info</span><span class="p">[</span><span class="s">'url'</span><span class="p">]:</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="s">"python downloader.py --youtubeid "</span> <span class="o">+</span> <span class="n">video_id</span> <span class="o">+</span> <span class="s">" --output result"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">cnt</span><span class="p">)</span> <span class="o">+</span> <span class="s">".csv"</span>
        <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="p">.</span><span class="n">system</span><span class="p">(</span><span class="s">"cd "</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
        <span class="n">os</span><span class="p">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">True</span>
</pre></table></code></div></div><p>한 동영상에 대해서 댓글을 받아옵니다. <code class="language-plaintext highlighter-rouge">info</code> 에 동영상리스트를 넣어둘 수도 있고, 저장된 <code class="language-plaintext highlighter-rouge">csv</code> 동영상 리스트를 불러오기도 합니다. 그리고 파이썬 명령어를 이용해서 한 동영상이 하나의 파일이고, 그 안에 댓글들이 적혀있습니다. 그 파일들은 현재 실행경로에 저장됩니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">get_YutubeSearch</span><span class="p">(</span><span class="n">srcText</span><span class="p">):</span>
    <span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'OAUTHLIB_INSECURE_TRANSPORT'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1'</span>
    <span class="n">clip_info</span> <span class="o">=</span> <span class="n">get_YoutuberClips</span><span class="p">(</span><span class="n">srcText</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_Replies</span><span class="p">(</span><span class="n">clip_info</span><span class="p">,</span> <span class="n">srcText</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">srcText</code> 에는 원하는 유투버 명칭을 넣어주시면 됩니다. <code class="language-plaintext highlighter-rouge">OAuthLib</code> 보안설정을 내리고 위 언급한 함수들을 순서대로 실행합니다. 저는 <code class="language-plaintext highlighter-rouge">HyundaiWorldwide</code> 를 인자로 넣었습니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">Merge_Data</span><span class="p">(</span><span class="n">extension</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="n">file_list</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">file_list_csv</span> <span class="o">=</span> <span class="p">[</span><span class="nb">file</span> <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">file_list</span> <span class="k">if</span> <span class="nb">file</span><span class="p">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">extension</span><span class="p">)]</span>
    <span class="n">csvset</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'YouTubeResult.txt'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">file_list_csv</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
        <span class="n">subset</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">csvset</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">subset</span><span class="p">)</span>
    <span class="n">csvset</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</pre></table></code></div></div><p>저장해서 각 댓글들을 한 텍스트파일에 넣는 작업입니다. 물론 위에 언급했던 한 동영상마다 존재하는 <code class="language-plaintext highlighter-rouge">csv</code> 파일은 번거로우니까, 한번에 보는게 좋겠죠.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">keyword</span> <span class="o">=</span> <span class="s">'HyundaiWorldwide'</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">get_YutubeSearch</span><span class="p">(</span><span class="n">keyword</span><span class="p">)</span>
    <span class="n">Merge_Data</span><span class="p">(</span><span class="s">'.csv'</span><span class="p">,</span> <span class="n">keyword</span><span class="p">)</span>
</pre></table></code></div></div><p>메인은 위와같이 동작합니다.</p><h3 id="15-in-closing"><span style="color:darkblue">1.5 In closing</span></h3><p>끝으로 모든 파이썬 파일의 끝에는 아래 내용을 작성해주셔야, 파이참에서 개별로 돌릴 때 동작합니다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/project/'>Project</a>, <a href='/categories/data-science/'>Data Science</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bigdata/" class="post-tag no-text-decoration" >BigData</a> <a href="/tags/cloud/" class="post-tag no-text-decoration" >Cloud</a> <a href="/tags/ai/" class="post-tag no-text-decoration" >AI</a> <a href="/tags/iot/" class="post-tag no-text-decoration" >IoT</a> <a href="/tags/aiot/" class="post-tag no-text-decoration" >AIoT</a> <a href="/tags/textmining/" class="post-tag no-text-decoration" >TextMining</a> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a> <a href="/tags/csharp/" class="post-tag no-text-decoration" >CSharp</a> <a href="/tags/naver/" class="post-tag no-text-decoration" >Naver</a> <a href="/tags/hyundai/" class="post-tag no-text-decoration" >Hyundai</a> <a href="/tags/kakao/" class="post-tag no-text-decoration" >Kakao</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3) - 몬기의 기술공방&url=https://simonwithwoogi.github.io/posts/projecthyundaithree/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3) - 몬기의 기술공방&u=https://simonwithwoogi.github.io/posts/projecthyundaithree/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3) - 몬기의 기술공방&url=https://simonwithwoogi.github.io/posts/projecthyundaithree/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Cpp_Trim/">C++_string_Trim</a><li><a href="/posts/Blazor_start/">Blazor_start</a><li><a href="/posts/projecthyundaithree/">Twitter Naver YouTube Crawler, 현대자동차 여론을 조사해보자(3)</a><li><a href="/posts/GitBlog2/">(깃블로그 운영-2) 테마를 다운받고 웹페이지를 확인해보자</a><li><a href="/posts/projecthyundaione/">Textmining, 현대자동차 여론을 조사해보자(1)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/matlab/">MATLAB</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/deeplearning/">DeepLearning</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/statistics/">Statistics</a> <a class="post-tag" href="/tags/improvement/">Improvement</a> <a class="post-tag" href="/tags/optimization/">Optimization</a> <a class="post-tag" href="/tags/quality/">Quality</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/transomusatdumlt/"><div class="card-body"> <span class="timeago small" > Mar 30 <i class="unloaded">2021-03-30T20:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>논문해석, 머신러닝 기술을 활용한 US Airline twitter data 오피니언 마이닝</h3><div class="text-muted small"><p> 해당 포스팅은 Saad, Abdelrahman I 저자의 “Opinion Mining on US Airline Twitter Data Using Machine Learning Techniques”라는 논문을 해석한 글이며, 해당 논문은 IEEE(ICENCO) Vol. 20, pp. 59-63, Dec 2020에 올라와 있습니다. 해당 논문의 Subj...</p></div></div></a></div><div class="card"> <a href="/posts/matlabastaralgo/"><div class="card-body"> <span class="timeago small" > Sep 24, 2020 <i class="unloaded">2020-09-24T18:30:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MATLAB A* Algorithm을 실습하고 지도 데이터에 그리기</h3><div class="text-muted small"><p> 1. What is A* Algorithm 1.1. Informed Search Search, 탐색에 관하여 알아봅시다. 지금 가고 싶은 곳을 떠올려 봅시다. 그리고 현재위치에서 목적지까지 시간을 얼마나 걸릴까요? 비용은 얼마나 들까요? 또 어디를 거쳐가야 할까요? 인터넷에 검색해보면 빠르게 답을 찾을 수 있습니다. 그런데 사실 다른 방법으로...</p></div></div></a></div><div class="card"> <a href="/posts/matlabneuralnet1/"><div class="card-body"> <span class="timeago small" > Nov 4, 2020 <i class="unloaded">2020-11-04T00:07:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MATLAB Neural Network를 이해하고 SLP MLP의 학습원리를 이해해보자(1)!</h3><div class="text-muted small"><p> 이번 포스팅에는 귀여운 그림이 전혀 없습니다. 1. Neural Network 사람은 감각기관에서 받아들이는 내용에 대해 왜곡이 일어날 때가 있습니다. 이미 가지고 있는 지식때문인데요. 예능 프로그램에 검은 상자 속에 어떤 물컹한 물체를 놔두고 출연자들이 촉감으로 이 물체가 무엇인지 맞추는 게임을 종종 보셨을 겁니다. 재밌죠. 대부분 소스라치게 놀...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/GitBlog2/" class="btn btn-outline-primary" prompt="Older"><p>(깃블로그 운영-2) 테마를 다운받고 웹페이지를 확인해보자</p></a> <a href="/posts/Cpp_Trim/" class="btn btn-outline-primary" prompt="Newer"><p>C++_string_Trim</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/simonwithwoogi">Simon Anderson</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/matlab/">MATLAB</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/algorithm/">Algorithm</a> <a class="post-tag" href="/tags/deeplearning/">DeepLearning</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/statistics/">Statistics</a> <a class="post-tag" href="/tags/improvement/">Improvement</a> <a class="post-tag" href="/tags/optimization/">Optimization</a> <a class="post-tag" href="/tags/quality/">Quality</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://SimonWithWoogi.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
